const fs = require('fs');
const posts = require('./posts.json');

const rssHeader = `<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0">
    <channel>
        <title>Arashi's Blog</title>
        <link>https://duanlinglan.github.io/blog.html</link>
        <description>Latest updates from my blog</description>
        <language>cn-zh</language>
        <lastBuildDate>${new Date().toUTCString()}</lastBuildDate>`;

const rssFooter = `
    </channel>
</rss>`;

const items = posts.map(post => `
    <item>
        <title>${post.title}</title>
        <link>https://duanlinglan.github.io/${post.file}</link>
        <description>${post.summary || 'New post on my blog!'}</description>
        <pubDate>${new Date(post.date).toUTCString()}</pubDate>
    </item>
`).join('');

const rssContent = `${rssHeader}${items}${rssFooter}`;

fs.writeFileSync('rss.xml', rssContent);
console.log('RSS feed updated.');
